;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="be5fb218-7593-266c-2319-5e3ef49ba536")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),a=e.i(710483);let r=({resourceText:e,isFullPage:r=!1})=>{let n=()=>(0,t.jsx)(a.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return r?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(n,{})})}):(0,t.jsx)(n,{})};e.s(["NoPermission",0,r,"default",0,r])},862326,e=>{"use strict";var t=e.i(478902),a=e.i(938933),r=e.i(843778);function n({children:e,className:a,tag:r="div",style:n}){let i=`${r}`;return(0,t.jsx)(i,{style:n,children:e})}n.Title=function({className:e,level:a=1,children:r,style:n}){let i=`h${a}`;return(0,t.jsx)(i,{style:n,children:r})},n.Text=function({className:e,children:a,style:r,type:n,disabled:i,mark:s,code:l,keyboard:o,underline:c,strikethrough:d,strong:u,small:m}){return l?(0,t.jsx)("code",{style:r,children:a}):s?(0,t.jsx)("mark",{style:r,children:a}):o?(0,t.jsx)("kbd",{style:r,children:a}):u?(0,t.jsx)("strong",{style:r,children:a}):(0,t.jsx)("span",{style:r,children:a})},n.Link=function({children:e,target:a="_blank",href:r,className:n,onClick:i,style:s}){return(0,t.jsx)("a",{onClick:i,href:r,target:a,rel:"noopener noreferrer",style:s,children:e})};var i=e.i(389959);let s=(0,i.createContext)({type:"text"}),l=e=>{let{type:a}=e;return(0,t.jsx)(s.Provider,{value:{type:a},children:e.children})},o=()=>{let e=(0,i.useContext)(s);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:a,ulClassName:r,style:n,type:i="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:n,children:(0,t.jsx)(l,{type:i,children:(0,t.jsx)("ul",{className:r,children:e})})})}c.Item=function({children:e,icon:n,active:i,rounded:s,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,a.default)("menu"),{type:h}=o(),p=[m.item.base];p.push(m.item.variants[h].base),i?p.push(m.item.variants[h].active):p.push(m.item.variants[h].normal);let f=[m.item.content.base];i?f.push(m.item.content.active):f.push(m.item.content.normal);let b=[m.item.icon.base];return i?b.push(m.item.icon.active):b.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,r.cn)("outline-none",p),style:u,onClick:l,"aria-current":i?"page":void 0,children:[n&&(0,t.jsx)("div",{className:`${b.join(" ")} min-w-fit`,children:n}),(0,t.jsx)("span",{className:f.join(" "),children:e})]})},c.Group=function({children:e,icon:r,title:n}){let i=(0,a.default)("menu"),{type:s}=o();return(0,t.jsxs)("div",{className:[i.group.base,i.group.variants[s]].join(" "),children:[r&&(0,t.jsx)("span",{className:i.group.icon,children:r}),(0,t.jsx)("span",{className:i.group.content,children:n}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(n.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["Menu",0,c],862326)},388147,799793,e=>{"use strict";var t=e.i(478902),a=e.i(587433),r=e.i(862326),n=e.i(215261),i=e.i(837710);let s=({name:e="",isActive:s,isExternal:l,icon:o,rightIcon:c,url:d="",target:u="_self",onClick:m,textClassName:h="",hoverText:p="",label:f})=>{let b=(0,t.jsx)(r.Menu.Item,{icon:o,rounded:!0,active:s,onClick:m,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:p||("string"==typeof e?e:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:e}),void 0!==f&&(0,t.jsx)(a.Badge,{variant:"new"===f.toLowerCase()?"success":"warning",className:"flex-shrink-0",children:f})]}),c&&(0,t.jsx)("div",{children:c})]})});return d?l?(0,t.jsx)(i.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:o,children:(0,t.jsx)(n.default,{href:d,target:"_blank",rel:"noreferrer",children:e})}):(0,t.jsx)(n.default,{href:d,className:"block",target:u,children:b}):b};e.s(["default",0,s],799793),e.s(["ProductMenu",0,({page:e,menu:n})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(r.Menu,{type:"pills",children:n.map((i,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(r.Menu.Group,{title:i.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:i.title}),i.isPreview&&(0,t.jsx)(a.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:i.items.map(a=>{let r=a.pages?a.pages.includes(e??""):e===a.key;return(0,t.jsx)(s,{url:a.url,name:a.name,icon:a.icon,rightIcon:a.rightIcon,isActive:r,isExternal:a.isExternal,target:a.isExternal?"_blank":"_self",label:a.label},a.key)})})]})}),l!==n.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},i.key||i.title))})})],388147)},3259,100387,e=>{"use strict";var t=e.i(478902),a=e.i(153545),r=e.i(933505);e.s(["ChevronRightIcon",()=>r.default],100387);var r=r,n=e.i(389959),i=e.i(843778);let s=n.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));s.displayName="Breadcrumb";let l=n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("ol",{ref:r,className:(0,i.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...a}));l.displayName="BreadcrumbList";let o=n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("li",{ref:r,className:(0,i.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...a}));o.displayName="BreadcrumbItem";let c=n.forwardRef(({asChild:e,className:r,...n},s)=>{let l=e?a.Slot:"a";return(0,t.jsx)(l,{ref:s,className:(0,i.cn)("transition-colors underline lg:no-underline hover:text-foreground",r),...n})});c.displayName="BreadcrumbLink";let d=n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("no-underline text-foreground",e),...a}));d.displayName="BreadcrumbPage";let u=({children:e,className:a,...n})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:size-3.5 text-foreground-muted",a),...n,children:e??(0,t.jsx)(r.default,{})});u.displayName="BreadcrumbSeparator",e.s(["Breadcrumb",()=>s,"BreadcrumbItem",()=>o,"BreadcrumbLink",()=>c,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},127739,e=>{"use strict";var t=e.i(478902),a=e.i(709520),r=e.i(389959),n=e.i(843778);let i=(0,a.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),s=(0,r.forwardRef)(({className:e,size:a,...r},s)=>(0,t.jsx)("div",{ref:s,...r,className:(0,n.cn)(i({size:a}),e)}));s.displayName="PageContainer",e.s(["PageContainer",0,s])},456050,e=>{"use strict";var t=e.i(478902),a=e.i(709520),r=e.i(389959),n=e.i(843778),i=e.i(3259),s=e.i(127739);let l=(0,a.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),o=(0,r.createContext)({size:"default"}),c=()=>(0,r.useContext)(o),d=({className:e,size:a,children:r,...i})=>{let s=a??"default";return(0,t.jsx)(o.Provider,{value:{size:s},children:(0,t.jsx)("div",{"data-slot":"page-header","data-size":s,className:(0,n.cn)(l({size:s}),e),...i,children:r})})},u=({className:e,children:a,...r})=>{let{size:l}=c();return(0,t.jsx)(s.PageContainer,{size:l,children:(0,t.jsx)(i.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,n.cn)("flex items-center gap-4 [&_li]:text-xs",e),...r,children:a})})};u.displayName="PageHeaderBreadcrumb";let m=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-icon",className:(0,n.cn)("text-foreground-light",e),...a});m.displayName="PageHeaderIcon";let h=({className:e,children:a,...r})=>(0,t.jsx)("div",{"data-slot":"page-header-summary",className:(0,n.cn)("flex flex-col gap-1",e),...r,children:a});h.displayName="PageHeaderSummary";let p=({className:e,children:a,...r})=>(0,t.jsx)("h1",{"data-slot":"page-header-title",className:(0,n.cn)("heading-title",e),...r,children:a}),f=({className:e,children:a,...r})=>(0,t.jsx)("div",{"data-slot":"page-header-description",className:(0,n.cn)("heading-subSection text-foreground-light",e),...r,children:a}),b=({className:e,children:a,...r})=>{let{size:i}=c();return(0,t.jsx)(s.PageContainer,{size:i,children:(0,t.jsx)("div",{"data-slot":"page-header-meta",className:(0,n.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...r,children:a})})};b.displayName="PageHeaderMeta";let y=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-actions",className:(0,n.cn)("flex items-center gap-2 shrink-0",e),...a});y.displayName="PageHeaderAside";let g=({className:e,...a})=>{let{size:r}=c();return(0,t.jsx)(s.PageContainer,{size:r,className:(0,n.cn)("full"===r&&"border-b"),children:(0,t.jsx)("div",{"data-slot":"page-header-footer",className:(0,n.cn)("w-full [&>nav]:border-b-0","full"!==r&&"border-b",e),...a})})};g.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>y,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>f,"PageHeaderIcon",()=>m,"PageHeaderMeta",()=>b,"PageHeaderNavigationTabs",()=>g,"PageHeaderSummary",()=>h,"PageHeaderTitle",()=>p])},223600,e=>{"use strict";var t=e.i(478902),a=e.i(370410),r=e.i(816467),n=e.i(389959),i=e.i(837710),s=e.i(843778),l=e.i(375761);let o=(0,n.forwardRef)(({text:e,asyncText:o,iconOnly:c=!1,children:d,onClick:u,copyLabel:m="Copy",copiedLabel:h="Copied",...p},f)=>{let[b,y]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!b)return;let e=setTimeout(()=>y(!1),2e3);return()=>clearTimeout(e)},[b]),(0,t.jsx)(i.Button,{ref:f,onClick:async t=>{let a=o?await o():e;y(!0),(0,l.copyToClipboard)(a),u?.(t)},...p,className:(0,s.cn)({"px-1":c},p.className),icon:b?(0,t.jsx)(a.Check,{strokeWidth:2,className:"text-brand"}):p.icon??(0,t.jsx)(r.Copy,{}),children:!c&&(0,t.jsx)(t.Fragment,{children:d??(b?h:m)})})});o.displayName="CopyButton",e.s(["default",0,o])},14703,e=>{"use strict";var t=e.i(242882),a=e.i(356003),r=e.i(234745),n=e.i(10429),i=e.i(389959),s=e.i(294285);async function l({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:n}=await (0,r.get)("/platform/auth/{ref}/config",{params:{path:{ref:e}},signal:t});return n&&(0,r.handleError)(n),a}e.s(["getProjectAuthConfig",()=>l,"useAuthConfigPrefetch",0,({projectRef:e})=>{let t=(0,a.useQueryClient)();return(0,i.useCallback)(()=>{e&&t.prefetchQuery({queryKey:s.authKeys.authConfig(e),queryFn:({signal:t})=>l({projectRef:e},t)})},[t,e])},"useAuthConfigQuery",0,({projectRef:e},{enabled:a=!0,...r}={})=>(0,t.useQuery)({queryKey:s.authKeys.authConfig(e),queryFn:({signal:t})=>l({projectRef:e},t),enabled:a&&n.IS_PLATFORM&&void 0!==e,...r})])},785951,e=>{"use strict";var t=e.i(478902),a=e.i(898452);e.i(128328);var r=e.i(657588),n=e.i(158639),i=e.i(388147),s=e.i(14703),l=e.i(912793),o=e.i(951138),c=e.i(825713),d=e.i(887902);let u=()=>{let e=(0,a.useRouter)(),{ref:o="default"}=(0,n.useParams)(),c=(0,r.useFlag)("authOverviewPage"),u=(0,r.useFlag)("EnableOAuth21"),{authenticationSignInProviders:m,authenticationRateLimits:h,authenticationEmails:p,authenticationMultiFactor:f,authenticationAttackProtection:b,authenticationPerformance:y}=(0,l.useIsFeatureEnabled)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:performance"]);(0,s.useAuthConfigPrefetch)({projectRef:o});let g=e.pathname.split("/")[4];return(0,t.jsx)(i.ProductMenu,{page:g,menu:(0,d.generateAuthMenu)(o,{authenticationSignInProviders:m,authenticationRateLimits:h,authenticationEmails:p,authenticationMultiFactor:f,authenticationAttackProtection:b,authenticationShowOverview:c,authenticationOauth21:u,authenticationPerformance:y})})},m=(0,o.withAuth)(({children:e})=>(0,t.jsx)(c.ProjectLayout,{title:"Authentication",product:"Authentication",productMenu:(0,t.jsx)(u,{}),isBlocking:!1,children:e}));e.s(["default",0,m])},114378,e=>{"use strict";var t=e.i(4196),a=e.i(389959),r=e.i(355901);function n({enabled:e,urlKey:r,select:n,onError:i}){let[s,l]=(0,t.useQueryState)(r,t.parseAsString.withOptions({history:"push",clearOnDefault:!0})),o=(0,a.useMemo)(()=>s?n(s):void 0,[s,n]);return(0,a.useEffect)(()=>{e&&s&&!o&&(i(Error("not found"),s),l(null))},[e,i,s,l,o]),{value:o,setValue:l}}e.s(["handleErrorOnDelete",0,(e,t,a)=>{t!==e.current?r.toast.error(a):e.current=null},"useQueryStateWithSelect",()=>n])},418029,e=>{"use strict";var t=e.i(478902),a=e.i(837710),r=e.i(843778);e.s(["NoSearchResults",0,({searchString:e,withinTableCell:n=!1,onResetFilter:i,className:s,label:l,description:o})=>(0,t.jsxs)("div",{className:(0,r.cn)("flex items-center justify-between",!n&&"bg-surface-100 px-4 md:px-6 py-4 rounded-md border border-default",s),children:[(0,t.jsxs)("div",{className:"text-sm flex flex-col gap-y-0.5",children:[(0,t.jsx)("p",{className:"text-foreground",children:l??"No results found"}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:o??`Your search for “${e}” did not return any results`})]}),void 0!==i&&(0,t.jsx)(a.Button,{type:"default",onClick:()=>i(),children:"Reset filter"})]})])},839360,e=>{"use strict";let t=(0,e.i(388019).default)("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);e.s(["PanelLeftClose",()=>t],839360)},300424,e=>{"use strict";var t=e.i(478902),a=e.i(902858),r=e.i(370410),n=e.i(365257),i=e.i(479232),s=e.i(389959),l=e.i(801834),o=e.i(2579),c=e.i(635494),d=e.i(206413),u=e.i(592360),m=e.i(178527),h=e.i(837710),p=e.i(703526),f=e.i(917007),b=e.i(920432),y=e.i(549815),g=e.i(911509),_=e.i(996960),x=e.i(866205),j=e.i(793912),w=e.i(135144),v=e.i(689805),S=e.i(396831),k=e.i(903248);e.s(["default",0,({className:e,disabled:N=!1,size:C="tiny",showError:E=!0,selectedSchemaName:P,supportSelectAll:T=!1,excludedSchemas:A=[],onSelectSchema:R,onSelectCreateSchema:L,portal:I=!0,align:q="start"})=>{let[D,$]=(0,s.useState)(!1),{can:O}=(0,o.useAsyncCheckPermissions)(a.PermissionAction.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:z}=(0,c.useSelectedProjectQuery)(),{data:B,isPending:F,isSuccess:M,isError:Q,error:K,refetch:U}=(0,l.useSchemasQuery)({projectRef:z?.ref,connectionString:z?.connectionString}),H=(B||[]).filter(e=>!A.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)("div",{className:e,children:[F&&(0,t.jsx)(h.Button,{type:"default",className:"w-full [&>span]:w-full",size:C,disabled:!0,children:(0,t.jsx)(k.Skeleton,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),E&&Q&&(0,t.jsxs)(m.Alert_Shadcn_,{variant:"warning",className:"!px-3 !py-3",children:[(0,t.jsx)(u.AlertTitle_Shadcn_,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,t.jsxs)(d.AlertDescription_Shadcn_,{className:"text-xs mb-2 break-words",children:["Error: ",K?.message]}),(0,t.jsx)(h.Button,{type:"default",size:"tiny",onClick:()=>U(),children:"Reload schemas"})]}),M&&(0,t.jsxs)(v.Popover_Shadcn_,{open:D,onOpenChange:$,modal:!1,children:[(0,t.jsx)(w.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(h.Button,{size:C,disabled:N,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,t.jsx)(n.ChevronsUpDown,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:P?(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,t.jsx)("p",{className:"text-foreground",children:"*"===P?"All schemas":P})]}):(0,t.jsx)("div",{className:"w-full flex gap-1",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,t.jsx)(j.PopoverContent_Shadcn_,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:q,portal:I,sameWidthAsTrigger:!0,children:(0,t.jsxs)(x.Command_Shadcn_,{children:[(0,t.jsx)(b.CommandInput_Shadcn_,{placeholder:"Find schema..."}),(0,t.jsxs)(g.CommandList_Shadcn_,{children:[(0,t.jsx)(p.CommandEmpty_Shadcn_,{children:"No schemas found"}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(S.ScrollArea,{className:(H||[]).length>7?"h-[210px]":"",children:[T&&(0,t.jsxs)(y.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{R("*"),$(!1)},onClick:()=>{R("*"),$(!1)},children:[(0,t.jsx)("span",{children:"All schemas"}),"*"===P&&(0,t.jsx)(r.Check,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),H?.map(e=>(0,t.jsxs)(y.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{R(e.name),$(!1)},onClick:()=>{R(e.name),$(!1)},children:[(0,t.jsx)("span",{children:e.name}),P===e.name&&(0,t.jsx)(r.Check,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==L&&O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.CommandSeparator_Shadcn_,{}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(y.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{L(),$(!1)},onClick:()=>{L(),$(!1)},children:[(0,t.jsx)(i.Plus,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}])},892277,e=>{"use strict";var t=e.i(478902),a=e.i(389959),r=e.i(837710),n=e.i(253214),i=e.i(392491),s=e.i(710483);let l=({onClose:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.DialogHeader,{children:(0,t.jsx)(n.DialogTitle,{children:"Schemas managed by Supabase"})}),(0,t.jsx)(n.DialogSectionSeparator,{}),(0,t.jsxs)(n.DialogSection,{className:"space-y-2 prose",children:[(0,t.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:i.INTERNAL_SCHEMAS.map(e=>(0,t.jsx)("code",{className:"text-xs",children:e},e))}),(0,t.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,t.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,t.jsx)(n.DialogFooter,{children:(0,t.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,t.jsx)(r.Button,{type:"default",onClick:e,children:"Understood"})})})]});e.s(["ProtectedSchemaWarning",0,({size:e="md",schema:o,entity:c})=>{let[d,u]=(0,a.useState)(!1),{isSchemaLocked:m,reason:h,fdwType:p}=(0,i.useIsProtectedSchema)({schema:o});return m?(0,t.jsx)(s.Admonition,{showIcon:"sm"!==e,layout:"sm"===e?"vertical":"horizontal",type:"note",title:"sm"===e?"Viewing protected schema":`Viewing ${c} from a protected schema`,description:"fdw"===h&&"iceberg"===p?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):"fdw"===h&&"s3_vectors"===p?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is used by Supabase to connect to vector buckets and is read-only through the dashboard."]}):(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is managed by Supabase and is read-only through the dashboard."]}),actions:("fdw"!==h||"iceberg"!==p&&"s3_vectors"!==p)&&(0,t.jsxs)(n.Dialog,{open:d,onOpenChange:u,children:[(0,t.jsx)(n.DialogTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{type:"default",size:"tiny",onClick:()=>u(!0),children:"Learn more"})}),(0,t.jsx)(n.DialogContent,{children:(0,t.jsx)(l,{onClose:()=>u(!1)})})]})}):null}])},728975,e=>{"use strict";var t=e.i(478902),a=e.i(416050),r=e.i(585915),n=e.i(215261),i=e.i(389959),s=e.i(843778);e.s(["default",0,({title:e,description:l,children:o,footer:c,url:d="",linkHref:u="",imgUrl:m,imgAlt:h,icon:p,className:f,loading:b=!1,fixedHeight:y=!0,hideChevron:g=!1,titleClass:_="",containerElement:x,...j})=>{let w,v=d||u||j.onClick,S={},k=x&&i.default.isValidElement(x)?e=>(0,i.cloneElement)(x,{...e}):void 0;j.onClick?(w=k??"button",S=j):u?(w=k??n.default,S={href:u,...j}):d?(w=k??"a",S={href:d,...j}):(w=k??"div",S=j);let N=["group relative text-left","bg-surface-100","border border-surface","rounded-md p-5 flex flex-row","transition ease-in-out duration-150"];v&&(N=[...N,"cursor-pointer","hover:bg-surface-200","hover:border-control"]),y&&(N=[...N,"min-h-32 md:min-h-44"]);let C=({children:e})=>(0,t.jsx)("div",{className:"mr-4 flex flex-col",children:e}),E=(0,t.jsxs)(t.Fragment,{children:[m&&(0,t.jsx)(C,{children:(0,t.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:`${m}`,alt:`${h}`,width:"26"})}),p&&(0,t.jsx)(C,{children:p}),(0,t.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:["string"==typeof e?(0,t.jsx)("h5",{className:`text-foreground pr-5 ${_}`,children:e}):e,(o||l)&&(0,t.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:l}),(0,t.jsx)("div",{className:"w-full",children:o&&o})]}),c&&(0,t.jsx)("div",{className:"w-full !mt-auto",children:c})]}),v&&(0,t.jsx)("div",{className:" absolute right-4 top-4 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:b?(0,t.jsx)(r.Loader,{className:"animate-spin"}):g?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)(a.ChevronRight,{})})]});return(0,t.jsx)(w,{...S,className:(0,s.cn)(N,f),children:E})}])},974900,e=>{"use strict";var t=e.i(755216),a=e.i(242882),r=e.i(714403);let n=e=>["projects",e,"database-roles"],i=t.default.roles.list();async function s({projectRef:e,connectionString:t},a){let{result:n}=await (0,r.executeSql)({projectRef:e,connectionString:t,sql:i.sql,queryKey:["database-roles"]},a);return n}function l(e,t){return e.invalidateQueries({queryKey:n(t)})}e.s(["invalidateRolesQuery",()=>l,"useDatabaseRolesQuery",0,({projectRef:e,connectionString:t},{enabled:r=!0,...i}={})=>(0,a.useQuery)({queryKey:n(e),queryFn:({signal:a})=>s({projectRef:e,connectionString:t},a),enabled:r&&void 0!==e,...i})],974900)},415190,e=>{"use strict";var t=e.i(242882),a=e.i(714403),r=e.i(938343),n=e.i(305015);async function i({projectRef:e,connectionString:t,id:r},i){if(!r)throw Error("id is required");let s=r?(0,n.default)(`
    with base_table_info as (
        select
            c.oid::int8 as id,
            nc.nspname as schema,
            c.relname as name,
            c.relkind,
            c.relrowsecurity as rls_enabled,
            c.relforcerowsecurity as rls_forced,
            c.relreplident,
            c.relowner,
            obj_description(c.oid) as comment,
            fs.srvname as foreign_server_name,
            fdw.fdwname as foreign_data_wrapper_name,
            fdw_handler.proname as foreign_data_wrapper_handler
        from pg_class c
        join pg_namespace nc on nc.oid = c.relnamespace
        left join pg_foreign_table ft on ft.ftrelid = c.oid
        left join pg_foreign_server fs on fs.oid = ft.ftserver
        left join pg_foreign_data_wrapper fdw on fdw.oid = fs.srvfdw
        left join pg_proc fdw_handler on fdw.fdwhandler = fdw_handler.oid
        where c.oid = ${r}
            and not pg_is_other_temp_schema(nc.oid)
            and (
                pg_has_role(c.relowner, 'USAGE')
                or has_table_privilege(
                    c.oid,
                    'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'
                )
                or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')
            )
    ),
    table_stats as (
        select
            b.id,
            case
                when b.relreplident = 'd' then 'DEFAULT'
                when b.relreplident = 'i' then 'INDEX'
                when b.relreplident = 'f' then 'FULL'
                else 'NOTHING'
            end as replica_identity,
            pg_total_relation_size(format('%I.%I', b.schema, b.name))::int8 as bytes,
            pg_size_pretty(pg_total_relation_size(format('%I.%I', b.schema, b.name))) as size,
            pg_stat_get_live_tuples(b.id) as live_rows_estimate,
            pg_stat_get_dead_tuples(b.id) as dead_rows_estimate
        from base_table_info b
        where b.relkind in ('r', 'p')
    ),
    primary_keys as (
        select
            i.indrelid as table_id,
            jsonb_agg(
                jsonb_build_object(
                    'schema', n.nspname,
                    'table_name', c.relname,
                    'table_id', i.indrelid::int8,
                    'name', a.attname
                )
                order by array_position(i.indkey, a.attnum)
            ) as primary_keys
        from pg_index i
        join pg_class c on i.indrelid = c.oid
        join pg_namespace n on c.relnamespace = n.oid
		join pg_attribute a on a.attrelid = c.oid and a.attnum = any(i.indkey)
        where i.indisprimary
        group by i.indrelid
    ),
    index_cols as (
        select
            i.indrelid as table_id,
            i.indkey,
            array_agg(
                a.attname
                order by array_position(i.indkey, a.attnum)
            ) as columns
        from pg_index i
        join pg_class c on i.indrelid = c.oid
        join pg_attribute a on a.attrelid = c.oid
            and a.attnum = any(i.indkey)
        where i.indisunique
            and i.indisprimary = false
        group by i.indrelid, i.indkey
    ),
    unique_indexes as (
        select
            ic.table_id,
            jsonb_agg(
                jsonb_build_object(
                    'schema', n.nspname,
                    'table_name', c.relname,
                    'table_id', ic.table_id::int8,
                    'columns', ic.columns
                )
            ) as unique_indexes
        from index_cols ic
        join pg_class c on c.oid = ic.table_id
        join pg_namespace n on n.oid = c.relnamespace
        group by ic.table_id
    ),
    relationships as (
        select
            c.conrelid as source_id,
            c.confrelid as target_id,
            jsonb_build_object(
                'id', c.oid::int8,
                'constraint_name', c.conname,
                'deletion_action', c.confdeltype,
                'update_action', c.confupdtype,
                'source_schema', nsa.nspname,
                'source_table_name', csa.relname,
                'source_column_name', sa.attname,
                'target_table_schema', nta.nspname,
                'target_table_name', cta.relname,
                'target_column_name', ta.attname
            ) as rel_info
        from pg_constraint c
        join pg_class csa on c.conrelid = csa.oid
        join pg_namespace nsa on csa.relnamespace = nsa.oid
        join pg_attribute sa on (sa.attrelid = c.conrelid and sa.attnum = any(c.conkey))
        join pg_class cta on c.confrelid = cta.oid
        join pg_namespace nta on cta.relnamespace = nta.oid
        join pg_attribute ta on (ta.attrelid = c.confrelid and ta.attnum = any(c.confkey))
        where c.contype = 'f'
    ),
    columns as (
        select
            a.attrelid as table_id,
            jsonb_agg(jsonb_build_object(
                'id', (a.attrelid || '.' || a.attnum),
                'table_id', c.oid::int8,
                'schema', nc.nspname,
                'table', c.relname,
                'ordinal_position', a.attnum,
                'name', a.attname,
                'default_value', case
                    when a.atthasdef then pg_get_expr(ad.adbin, ad.adrelid)
                    else null
                end,
                'data_type', case
                    when t.typtype = 'd' then
                        case
                            when bt.typelem <> 0::oid and bt.typlen = -1 then 'ARRAY'
                            when nbt.nspname = 'pg_catalog' then format_type(t.typbasetype, null)
                            else 'USER-DEFINED'
                        end
                    else
                        case
                            when t.typelem <> 0::oid and t.typlen = -1 then 'ARRAY'
                            when nt.nspname = 'pg_catalog' then format_type(a.atttypid, null)
                            else 'USER-DEFINED'
                        end
                end,
                'format', case
                    when t.typtype = 'e' then
                        case
                            when nt.nspname <> 'public' then concat(nt.nspname, '.', coalesce(bt.typname, t.typname))
                            else coalesce(bt.typname, t.typname)
                        end
                    else
                        coalesce(bt.typname, t.typname)
                end,
                'is_identity', a.attidentity in ('a', 'd'),
                'identity_generation', case a.attidentity
                    when 'a' then 'ALWAYS'
                    when 'd' then 'BY DEFAULT'
                    else null
                end,
                'is_generated', a.attgenerated in ('s'),
                'is_nullable', not (a.attnotnull or t.typtype = 'd' and t.typnotnull),
                'is_updatable', (
                    b.relkind in ('r', 'p') or
                    (b.relkind in ('v', 'f') and pg_column_is_updatable(b.id, a.attnum, false))
                ),
                'is_unique', uniques.table_id is not null,
                'check', check_constraints.definition,
                'comment', col_description(c.oid, a.attnum),
                'enums', coalesce(
                    (
                        select jsonb_agg(e.enumlabel order by e.enumsortorder)
                        from pg_catalog.pg_enum e
                        where e.enumtypid = coalesce(bt.oid, t.oid)
                            or e.enumtypid = coalesce(bt.typelem, t.typelem)
                    ),
                    '[]'::jsonb
                )
            ) order by a.attnum) as columns
        from pg_attribute a
        join base_table_info b on a.attrelid = b.id
        join pg_class c on a.attrelid = c.oid
        join pg_namespace nc on c.relnamespace = nc.oid
        left join pg_attrdef ad on (a.attrelid = ad.adrelid and a.attnum = ad.adnum)
        join pg_type t on a.atttypid = t.oid
        join pg_namespace nt on t.typnamespace = nt.oid
        left join pg_type bt on (t.typtype = 'd' and t.typbasetype = bt.oid)
        left join pg_namespace nbt on bt.typnamespace = nbt.oid
        left join (
            select
                conrelid as table_id,
                conkey[1] as ordinal_position
            from pg_catalog.pg_constraint
            where contype = 'u' and cardinality(conkey) = 1
            group by conrelid, conkey[1]
        ) as uniques on uniques.table_id = a.attrelid and uniques.ordinal_position = a.attnum
        left join (
            select distinct on (conrelid, conkey[1])
                conrelid as table_id,
                conkey[1] as ordinal_position,
                substring(
                    pg_get_constraintdef(oid, true),
                    8,
                    length(pg_get_constraintdef(oid, true)) - 8
                ) as definition
            from pg_constraint
            where contype = 'c' and cardinality(conkey) = 1
            order by conrelid, conkey[1], oid asc
        ) as check_constraints on check_constraints.table_id = a.attrelid
                            and check_constraints.ordinal_position = a.attnum
        where a.attnum > 0
        and not a.attisdropped
        group by a.attrelid
    )
    select
        case b.relkind
            when 'r' then jsonb_build_object(
                'entity_type', b.relkind,
                'id', b.id,
                'schema', b.schema,
                'name', b.name,
                'rls_enabled', b.rls_enabled,
                'rls_forced', b.rls_forced,
                'replica_identity', ts.replica_identity,
                'bytes', ts.bytes,
                'size', ts.size,
                'live_rows_estimate', ts.live_rows_estimate,
                'dead_rows_estimate', ts.dead_rows_estimate,
                'comment', b.comment,
                'primary_keys', coalesce(pk.primary_keys, '[]'::jsonb),
                'unique_indexes', coalesce(ui.unique_indexes, '[]'::jsonb),
                'relationships', coalesce(
                    (select jsonb_agg(r.rel_info)
                    from relationships r
                    where r.source_id = b.id or r.target_id = b.id),
                    '[]'::jsonb
                ),
                'columns', coalesce(c.columns, '[]'::jsonb)
            )
            when 'p' then jsonb_build_object(
                'entity_type', b.relkind,
                'id', b.id,
                'schema', b.schema,
                'name', b.name,
                'rls_enabled', b.rls_enabled,
                'rls_forced', b.rls_forced,
                'replica_identity', ts.replica_identity,
                'bytes', ts.bytes,
                'size', ts.size,
                'live_rows_estimate', ts.live_rows_estimate,
                'dead_rows_estimate', ts.dead_rows_estimate,
                'comment', b.comment,
                'primary_keys', coalesce(pk.primary_keys, '[]'::jsonb),
                'unique_indexes', coalesce(ui.unique_indexes, '[]'::jsonb),
                'relationships', coalesce(
                    (select jsonb_agg(r.rel_info)
                    from relationships r
                    where r.source_id = b.id or r.target_id = b.id),
                    '[]'::jsonb
                ),
                'columns', coalesce(c.columns, '[]'::jsonb)
            )
            when 'v' then jsonb_build_object(
                'entity_type', b.relkind,
                'id', b.id,
                'schema', b.schema,
                'name', b.name,
                'is_updatable', (pg_relation_is_updatable(b.id, false) & 20) = 20,
                'comment', b.comment,
                'columns', coalesce(c.columns, '[]'::jsonb)
            )
            when 'm' then jsonb_build_object(
                'entity_type', b.relkind,
                'id', b.id,
                'schema', b.schema,
                'name', b.name,
                'is_populated', true,
                'comment', b.comment,
                'columns', coalesce(c.columns, '[]'::jsonb)
            )
            when 'f' then jsonb_build_object(
                'entity_type', b.relkind,
                'id', b.id,
                'schema', b.schema,
                'name', b.name,
                'comment', b.comment,
                'foreign_server_name', b.foreign_server_name,
                'foreign_data_wrapper_name', b.foreign_data_wrapper_name,
                'foreign_data_wrapper_handler', b.foreign_data_wrapper_handler,
                'columns', coalesce(c.columns, '[]'::jsonb)
            )
        end as entity
    from base_table_info b
    left join table_stats ts on b.id = ts.id
    left join primary_keys pk on b.id = pk.table_id
    left join unique_indexes ui on b.id = ui.table_id
    left join columns c on b.id = c.table_id;
  `):"",{result:l}=await (0,a.executeSql)({projectRef:e,connectionString:t,sql:s,queryKey:["table-editor",r]},i);return l[0]?.entity??null}function s(e,{projectRef:t,connectionString:a,id:n}){return e.fetchQuery({queryKey:r.tableEditorKeys.tableEditor(t,n),queryFn:({signal:e})=>i({projectRef:t,connectionString:a,id:n},e)})}e.s(["getTableEditor",()=>i,"prefetchTableEditor",()=>s,"useTableEditorQuery",0,({projectRef:e,connectionString:a,id:n},{enabled:s=!0,...l}={})=>(0,t.useQuery)({queryKey:r.tableEditorKeys.tableEditor(e,n),queryFn:({signal:t})=>i({projectRef:e,connectionString:a,id:n},t),enabled:s&&void 0!==e&&void 0!==n&&!isNaN(n),refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:3e5,...l})],415190)},412385,e=>{"use strict";var t=e.i(389959),a=e.i(323796);e.s(["useConfirmOnClose",0,({checkIsDirty:e,onClose:r})=>{let[n,i]=(0,t.useState)(!1),s=(0,a.default)(e),l=(0,a.default)(r),o=(0,t.useCallback)(()=>{s.current()?i(!0):l.current()},[]),c=(0,t.useCallback)(()=>{i(!1),l.current()},[]),d=(0,t.useCallback)(()=>{i(!1)},[]),u=(0,t.useMemo)(()=>({visible:n,onClose:c,onCancel:d}),[n,c,d]);return(0,t.useMemo)(()=>({confirmOnClose:o,modalProps:u}),[o,u])}])},45674,(e,t,a)=>{var r=e.r(467798),n=e.r(323472),i=e.r(276199),s=e.r(372797),l=e.r(140062),o=e.r(125581),c=e.r(584902),d=e.r(189082),u=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(l(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||o(e)||d(e)||i(e)))return!e.length;var t=n(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var a in e)if(u.call(e,a))return!1;return!0}},102631,e=>{"use strict";e.s(["generatePolicyUpdateSQL",0,e=>{let t="";return null!==e.definition&&void 0!==e.definition&&(t+=`using (${e.definition})${null===e.check||void 0===e.check?";":""}
`),null!==e.check&&void 0!==e.check&&(t+=`with check (${e.check});
`),`
alter policy "${e.name}" 
on "${e.schema}"."${e.table}"
to ${e.roles.join(", ")}
${t}
`.trim()}])},302372,e=>{"use strict";var t=e.i(242882),a=e.i(248593),r=e.i(234745),n=e.i(635494);e.i(10429);var i=e.i(837508),s=e.i(509847);async function l({projectRef:e,connectionString:t,schema:n},i,s){if(!e)throw Error("projectRef is required");let l=new Headers(s);t&&l.set("x-connection-encrypted",t);let{data:o,error:c}=await (0,r.get)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":t,"x-pg-application-name":a.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e},query:{included_schemas:n||"",excluded_schemas:""}},headers:l,signal:i});return c&&(0,r.handleError)(c),o}e.s(["useDatabasePoliciesQuery",0,({projectRef:e,connectionString:a,schema:r},{enabled:o=!0,...c}={})=>{let{data:d}=(0,n.useSelectedProjectQuery)(),u=d?.status===i.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,t.useQuery)({queryKey:s.databasePoliciesKeys.list(e,r),queryFn:({signal:t})=>l({projectRef:e,connectionString:a,schema:r},t),enabled:o&&void 0!==e&&u,...c})}])},938343,e=>{"use strict";e.s(["tableEditorKeys",0,{tableEditor:(e,t)=>["projects",e,"table-editor",t].filter(Boolean)}])},847278,e=>{"use strict";var t=e.i(755216),a=e.i(38429),r=e.i(356003),n=e.i(355901),i=e.i(915993),s=e.i(714403),l=e.i(938343),o=e.i(138658);async function c({projectRef:e,connectionString:a,id:r,name:n,schema:i,payload:l}){let{sql:o}=t.default.tables.update({id:r,name:n,schema:i},l),{result:c}=await (0,s.executeSql)({projectRef:e,connectionString:a,sql:o,queryKey:["table","update",r]});return c}e.s(["updateTable",()=>c,"useTableUpdateMutation",0,({onSuccess:e,onError:t,...s}={})=>{let d=(0,r.useQueryClient)();return(0,a.useMutation)({mutationFn:e=>c(e),async onSuccess(t,a,r){let{projectRef:n,schema:s,id:c}=a;await Promise.all([d.invalidateQueries({queryKey:l.tableEditorKeys.tableEditor(n,c)}),d.invalidateQueries({queryKey:o.tableKeys.list(n,s)}),d.invalidateQueries({queryKey:i.lintKeys.lint(n)})]),await e?.(t,a,r)},async onError(e,a,r){void 0===t?n.toast.error(`Failed to update database table: ${e.message}`):t(e,a,r)},...s})}])},310959,e=>{"use strict";var t=e.i(479084),a=e.i(977540);let r=10240,n=50,i=["text","varchar","char","character varying","character"],s=["json","jsonb"],l=new Set(s),o=new Set([...i,...s,"bytea","xml","hstore","clob","vector","geometry","geography","tsvector","tsquery","daterange","tsrange","tstzrange","numrange","int4range","int8range","cube","ltree","lquery","jsonpath","citext"]);e.s(["MAX_ARRAY_SIZE",0,n,"MAX_CHARACTERS",0,r,"THRESHOLD_COUNT",0,1e5,"getTableRowsSql",0,({table:e,filters:s=[],sorts:c=[],page:d,limit:u,maxCharacters:m=r,maxArraySize:h=n,sortExcludedColumns:p=[]})=>{if(!e||!e.columns)return"";let f=new a.Query().from(e.name,e.schema).select();s.forEach(t=>{let a=e.columns?.find(e=>e.name===t.column),r=!a||i.includes(a.format);f=f.filter(t.column,t.operator,r||""!==t.value?t.value:null)});let b=e.live_rows_estimate||0;if(0===c.length&&b<=1e5&&e.columns.length>0){let t=((e,{excludedColumns:t=[]}={})=>{let a=e.primary_keys?.map(e=>e.name);if(a&&a.length>0&&!a.every(e=>t.includes(e)))return a;if(e.columns&&e.columns.length>0){let a=e.columns.filter(e=>!e.data_type.includes("json")&&!t.includes(e.name));if(a.length>0)return[a[0].name]}return[]})(e,{excludedColumns:p});t.length>0&&t.forEach(t=>{f=f.order(e.name,t)})}else c.forEach(e=>{f=f.order(e.table,e.column,e.ascending,e.nullsFirst)});let{from:y,to:g}=function(e,t=100){let a=e?e*t:0;return{from:a,to:e?a+t-1:t-1}}((d??1)-1,u),_=`with _base_query as (${f.range(y,g).toSql({isCTE:!1,isFinal:!1})})`,x=e.columns.sort((e,t)=>e.ordinal_position-t.ordinal_position).map(e=>({name:e.name,format:e.format.toLowerCase()})),j=e.columns.filter(e=>{let t;return t=e.format,o.has(t.toLowerCase())}).map(e=>e.name),w=x.map(({name:e})=>{let a=(0,t.ident)(e);return j.includes(e)?`case
        when octet_length(${a}::text) > ${m} 
        then left(${a}::text, ${m}) || '...'
        else ${a}::text
      end as ${a}`:a});e.columns.filter(e=>"array"===e.data_type.toLowerCase()).map(e=>({name:e.name,format:e.format.toLowerCase().slice(1)})).forEach(({name:e,format:a})=>{let r=w.findIndex(a=>a===(0,t.ident)(e)),n=l.has(a)?`${a}[]`:"text[]";r>=0&&(w[r]=`
        case 
          when octet_length(${(0,t.ident)(e)}::text) > ${m} 
          then
            case
              when array_ndims(${(0,t.ident)(e)}) = 1
              then
                (select array_cat(${(0,t.ident)(e)}[1:${h}]::${n}, ${"text[]"===n?"array['...']":"array['{\"truncated\": true}'::json]"}::${n}))::${n}
              else
                ${(0,t.ident)(e)}[1:${h}]::${n}
            end
          else ${(0,t.ident)(e)}::${n}
        end
      `)});let v=w.join(","),S=new a.Query().from("_base_query").select(v);return`${_}
  ${S.toSql({isCTE:!0,isFinal:!0})}`}])},790819,e=>{"use strict";e.s(["tableRowKeys",0,{tableRows:(e,{table:t,roleImpersonationState:a,...r}={})=>["projects",e,"table-rows",t?.id,"rows",{roleImpersonation:a?.role,...r}],tableRowsCount:(e,{table:t,...a}={})=>["projects",e,"table-rows",t?.id,"count",a],tableRowsAndCount:(e,t)=>["projects",e,"table-rows",t]}])},46974,585673,e=>{"use strict";let t=["smallint","integer","bigint","decimal","numeric","real","double precision","serial","bigserial","int2","int4","int8","float4","float8","smallserial","serial2","serial4","serial8"];function a(e){return t.indexOf(e.toLowerCase())>-1}let r=["json","jsonb","array"];function n(e){return r.indexOf(e.toLowerCase())>-1}let i=["array"];function s(e){return i.indexOf(e.toLowerCase())>-1}let l=["uuid","text","character varying"];function o(e){return l.indexOf(e.toLowerCase())>-1}let c=["citext"];function d(e){return c.indexOf(e.toLowerCase())>-1}let u=["timestamp","timestamptz"];function m(e){return u.indexOf(e.toLowerCase())>-1}let h=["date"];function p(e){return h.indexOf(e.toLowerCase())>-1}let f=["time","timetz"];function b(e){return f.indexOf(e.toLowerCase())>-1}let y=["boolean","bool"];function g(e){return y.indexOf(e.toLowerCase())>-1}let _=["user-defined"];function x(e){return _.indexOf(e.toLowerCase())>-1}let j=["bytea"];function w(e){return j.indexOf(e.toLowerCase())>-1}function v(e){let{targetTableSchema:t,targetTableName:a,targetColumnName:r}=e?.foreignKey??{};return!!t&&!!a&&!!r}e.s(["isArrayColumn",()=>s,"isBinaryColumn",()=>w,"isBoolColumn",()=>g,"isCiTextColumn",()=>d,"isDateColumn",()=>p,"isDateTimeColumn",()=>m,"isEnumColumn",()=>x,"isForeignKeyColumn",()=>v,"isJsonColumn",()=>n,"isNumericalColumn",()=>a,"isTextColumn",()=>o,"isTimeColumn",()=>b],585673);var S=e.i(962217);function k(e,t){let r=e.columns.find(e=>e.name==t.column);if(r&&a(r.format)){let e=Number(t.value);if(!Number.isNaN(e)&&!(e>Number.MAX_SAFE_INTEGER))return Number(t.value)}return t.value}function N({table:e}){if(!(0,S.isTableLike)(e))return{error:{message:"Only table rows can be updated or deleted"}};let t=e.primary_keys;return t&&0!=t.length?{primaryKeys:t.map(e=>e.name)}:{error:{message:"Please add a primary key column to your table to update or delete rows"}}}e.s(["formatFilterValue",()=>k,"getPrimaryKeys",()=>N],46974)},941381,70756,e=>{"use strict";var t=e.i(478902),a=e.i(356003),r=e.i(898452),n=e.i(389959),i=e.i(19583),s=e.i(415190);e.i(967533);var l=e.i(977540),o=e.i(310959),c=e.i(242882);e.i(128328);var d=e.i(86086),u=e.i(311827),m=e.i(962217),h=e.i(908937),p=e.i(201461);e.i(56031);var f=e.i(237948),b=e.i(714403),y=e.i(790819),g=e.i(46974);async function _(e){return new Promise(t=>setTimeout(t,e))}async function x(e,t=3,a=1e3){for(let r=0;r<=t;r++)try{return await e()}catch(e){if(429===(e instanceof f.ResponseError?e.code:e.status)&&r<t){let t=function(e){if(e instanceof f.ResponseError)return e.retryAfter;let t=e.headers?.get("retry-after");if(t)return parseInt(t)}(e),n=t?1e3*t:a*Math.pow(2,r);await _(n);continue}throw e}throw Error("Max retries reached without success")}let j=({table:e,filters:t=[],sorts:a=[]})=>{let r,n,i,s,o,c=new l.Query,d=e.columns.filter(e=>(e?.enum??[]).length>0&&"array"===e.dataType.toLowerCase()).map(e=>`"${e.name}"::text[]`),m=c.from(e.name,e.schema??void 0).select(d.length>0?`*,${d.join(",")}`:"*");t.filter(e=>e.value&&""!==e.value).forEach(t=>{let a=(0,g.formatFilterValue)(e,t);m=m.filter(t.column,t.operator,a)});let h=!1,{cursorPaginationEligible:p,cursorPaginationNonEligible:f}=(r=[],n=[],(i=e.primaryKey)&&r.push(i),s=e.uniqueIndexes,(o=s?.filter(t=>t.every(t=>{let a=e.columns.find(e=>e.name===t);return!!a&&!a.isNullable})))&&r.push(...o),n.push(...e.columns.filter(e=>!e.dataType.includes("json")).map(e=>e.name)),{cursorPaginationEligible:r,cursorPaginationNonEligible:n}),b=e.type===u.ENTITY_TYPE.TABLE||e.type===u.ENTITY_TYPE.PARTITIONED_TABLE||e.type===u.ENTITY_TYPE.MATERIALIZED_VIEW;if(0===a.length)p.length>0?(h=p[0],p[0].forEach(t=>{m=m.order(e.name,t)})):(f.length>0&&(m=m.order(e.name,f[0])),b&&(m=m.order(e.name,"ctid")));else{a.forEach(e=>{m=m.order(e.table,e.column,e.ascending,e.nullsFirst)});let t=p[0];if(t){let r=new Set(a.filter(t=>t.table===e.name).map(e=>e.column));t.filter(e=>!r.has(e)).forEach(t=>{m=m.order(e.name,t)})}else b&&(m=m.order(e.name,"ctid"))}return{sql:m,cursorColumns:h}},w=async({projectRef:e,connectionString:t,table:a,filters:r=[],sorts:n=[],roleImpersonationState:i,progressCallback:s})=>{if(d.IS_PLATFORM&&!t)return console.error("Connection string is required"),[];let l=[],{sql:o,cursorColumns:c}=j({table:a,sorts:n,filters:r});if(c){let a=null;for(;;){let r=o.clone();a&&(r=r.filter(c,">",c.map(e=>a[e])));let n=(0,h.wrapWithRoleImpersonation)(r.range(0,499).toSql(),i);try{let{result:r}=await x(async()=>(0,b.executeSql)({projectRef:e,connectionString:t,sql:n}));for(let e of(l.push(...r),s?.(l.length),a={},c))a[e]=r[r.length-1]?.[e];if(r.length<500)break;await _(500)}catch(e){throw Error(`Error fetching all table rows: ${e instanceof Error?e.message:"Unknown error"}`)}}}else{let a=-1;for(;;){let r=500*(a+=1),n=(a+1)*500-1,c=(0,h.wrapWithRoleImpersonation)(o.range(r,n).toSql(),i);try{let{result:a}=await x(async()=>(0,b.executeSql)({projectRef:e,connectionString:t,sql:c}));if(l.push(...a),s?.(l.length),a.length<500)break;await _(500)}catch(e){throw Error(`Error fetching all table rows: ${e instanceof Error?e.message:"Unknown error"}`)}}}return l.filter(e=>1!==e[h.ROLE_IMPERSONATION_NO_RESULTS])};async function v({queryClient:e,projectRef:t,connectionString:a,tableId:r,roleImpersonationState:n,filters:l,sorts:c,limit:d,page:u},f){let y=await (0,s.prefetchTableEditor)(e,{projectRef:t,connectionString:a,id:r});if(!y)throw Error("Table not found");let g=(0,i.parseSupaTable)(y),_=l?.filter(e=>"="===e.operator||"is"===e.operator).flatMap(e=>e.column),x=(0,m.isMsSqlForeignTable)(y)?Array.from(new Set(_)):void 0,j=(0,h.wrapWithRoleImpersonation)((0,o.getTableRowsSql)({table:y,filters:l,sorts:c,limit:d,page:u,sortExcludedColumns:x}),n);try{let{result:e}=await (0,b.executeSql)({projectRef:t,connectionString:a,sql:j,queryKey:["table-rows",g?.id],isRoleImpersonationEnabled:(0,p.isRoleImpersonationEnabled)(n?.role)},f);return{rows:e.map((e,t)=>({idx:t,...e}))}}catch(e){throw Error(e instanceof Error?e.message:"Unknown error")}}function S(e,{projectRef:t,connectionString:a,tableId:r,...n}){return e.fetchQuery({queryKey:y.tableRowKeys.tableRows(t,{table:{id:r},...n}),queryFn:({signal:i})=>v({queryClient:e,projectRef:t,connectionString:a,tableId:r,...n},i)})}e.s(["executeWithRetry",()=>x,"fetchAllTableRows",0,w,"getAllTableRowsSql",0,j,"prefetchTableRows",()=>S,"useTableRowsQuery",0,({projectRef:e,connectionString:t,tableId:r,...n},{enabled:i=!0,...s}={})=>{let l=(0,a.useQueryClient)();return(0,c.useQuery)({queryKey:y.tableRowKeys.tableRows(e,{table:{id:r},...n}),queryFn:({signal:a})=>v({queryClient:l,projectRef:e,connectionString:t,tableId:r,...n},a),enabled:i&&void 0!==e&&void 0!==r,...s})}],70756);var k=e.i(635494),N=e.i(636047),C=e.i(85626);function E({queryClient:e,projectRef:t,connectionString:a,id:r,sorts:n,filters:l,roleImpersonationState:o}){return(0,s.prefetchTableEditor)(e,{projectRef:t,connectionString:a,id:r}).then(s=>{if(s){let c=(0,i.parseSupaTable)(s),{sorts:d=[],filters:u=[]}=(0,i.loadTableEditorStateFromLocalStorage)(t,s.name,s.schema)??{};S(e,{projectRef:t,connectionString:a,tableId:r,sorts:n??(0,i.formatSortURLParams)(c.name,d),filters:l??(0,i.formatFilterURLParams)(u),page:1,limit:N.TABLE_EDITOR_DEFAULT_ROWS_PER_PAGE,roleImpersonationState:o})}})}function P(){let e=(0,r.useRouter)(),t=(0,a.useQueryClient)(),{data:i}=(0,k.useSelectedProjectQuery)(),s=(0,p.useRoleImpersonationStateSnapshot)();return(0,n.useCallback)(({id:a,filters:r,sorts:n})=>{let l=a?Number(a):void 0;!i||!l||isNaN(l)||(e.prefetch(`/project/${i.ref}/editor/${l}`),E({queryClient:t,projectRef:i.ref,connectionString:i.connectionString,id:l,sorts:n,filters:r,roleImpersonationState:s}).catch(()=>{}))},[i,t,s,e])}function T({projectRef:e,id:a,sorts:r,filters:n,href:i,children:s,...l}){let o=P();return(0,t.jsx)(C.default,{href:i||`/project/${e}/editor/${a}`,prefetcher:()=>o({id:a,sorts:r,filters:n}),...l,children:s})}e.s(["EditorTablePageLink",()=>T,"prefetchEditorTablePage",()=>E,"usePrefetchEditorTablePage",()=>P],941381)},863946,(e,t,a)=>{var r=e.r(196047),n=e.r(113619),i=e.r(744040),s=e.r(70234),l=e.r(389239),o=e.r(233037);t.exports=function(e,t,a,c){var d=-1,u=n,m=!0,h=e.length,p=[],f=t.length;if(!h)return p;a&&(t=s(t,l(a))),c?(u=i,m=!1):t.length>=200&&(u=o,m=!1,t=new r(t));e:for(;++d<h;){var b=e[d],y=null==a?b:a(b);if(b=c||0!==b?b:0,m&&y==y){for(var g=f;g--;)if(t[g]===y)continue e;p.push(b)}else u(t,y,c)||p.push(b)}return p}},184171,(e,t,a)=>{var r=e.r(863946),n=e.r(380487),i=e.r(583755);t.exports=n(function(e,t){return i(e)?r(e,t):[]})},141313,(e,t,a)=>{var r=e.r(913360),n=e.r(372797);t.exports=function(e,t,a,i){return null==e?[]:(n(t)||(t=null==t?[]:[t]),n(a=i?void 0:a)||(a=null==a?[]:[a]),r(e,t,a))}},442338,e=>{"use strict";var t=e.i(478902),a=e.i(975924);e.s(["BadgeDisabled",0,({name:e})=>(0,t.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm",children:(0,t.jsx)("span",{className:"opacity-50",children:e})}),"BadgeSelected",0,({name:e,handleRemove:r})=>(0,t.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)(a.X,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),r()}})]})])},297396,e=>{"use strict";var t=e.i(478902),a=e.i(141313),r=e.i(184171),n=e.i(370410),i=e.i(88816),s=e.i(389959),l=e.i(703526),o=e.i(917007),c=e.i(920432),d=e.i(549815),u=e.i(911509),m=e.i(866205),h=e.i(793912),p=e.i(135144),f=e.i(689805),b=e.i(396831),y=e.i(843778),g=e.i(442338);e.s(["MultiSelectV2",0,({options:e,value:_,placeholder:x,searchPlaceholder:j="Search for option",disabled:w=!1,onChange:v=()=>{}})=>{let[S,k]=(0,s.useState)(!1),[N,C]=(0,s.useState)(_||[]),E=_||N,P=(0,a.default)(e,["disabled"],["desc"]),T=t=>{let a=void 0!==(E||[]).find(e=>e===t.value)?[...(0,r.default)(E,t.value)]:[...E.concat([t.value])],n=e.filter(e=>e.disabled).map(e=>e.name),i=[...new Set(a.concat(n))];C(i),v(i)};return(0,t.jsx)("div",{className:w?"pointer-events-none opacity-50":"",children:(0,t.jsxs)(f.Popover_Shadcn_,{open:S,onOpenChange:k,modal:!1,children:[(0,t.jsx)(p.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsxs)("div",{className:(0,y.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer",`${0===E.length?"h-9":""}`),onClick:()=>k(!0),children:[0===E.length&&x&&(0,t.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:x}),E.map((e,a)=>{let r=`${e}-${a}`,n=P.find(t=>t.value===e),i=n?.disabled??!1;return n?i?(0,t.jsx)(g.BadgeDisabled,{name:n.name},r):(0,t.jsx)(g.BadgeSelected,{name:n.name,handleRemove:()=>T(n)},r):(0,t.jsx)(t.Fragment,{})}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,t.jsx)(i.ChevronDown,{size:16,strokeWidth:2,className:"text-foreground-lighter"})})]})}),(0,t.jsx)(h.PopoverContent_Shadcn_,{className:"p-0 w-96 border-strong",side:"bottom",align:"start",children:(0,t.jsxs)(m.Command_Shadcn_,{children:[(0,t.jsx)(c.CommandInput_Shadcn_,{placeholder:j}),(0,t.jsxs)(u.CommandList_Shadcn_,{children:[(0,t.jsx)(l.CommandEmpty_Shadcn_,{children:"No options found"}),(0,t.jsx)(o.CommandGroup_Shadcn_,{children:(0,t.jsx)(b.ScrollArea,{className:(0,y.cn)(P.length>7?"h-[210px]":""),children:P?.map(e=>{let a=!!(E&&E.find(t=>t===e.value));return(0,t.jsx)(d.CommandItem_Shadcn_,{value:e.value,className:"cursor-pointer w-full",onClick:()=>T(e),onSelect:()=>T(e),children:(0,t.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,a&&(0,t.jsx)(n.Check,{size:14})]})},e.id)})})})]})]})})]})})}])},42081,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:r=3,redaction:n="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:s=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...s].map(e=>e.toLowerCase())),o=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of o)t=t.replace(e,n);return t}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=r)return i;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let r=[];c.set(t,r);for(let n=0;n<t.length;n++)r[n]=e(t[n],a+1);return r}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let r={};for(let[i,s]of(c.set(t,r),Object.entries(t)))u(i)?r[i]=n:r[i]=e(s,a+1);return r}if(t instanceof Map){let r=[];for(let[i,s]of(c.set(t,r),t.entries())){let t=u(i)?n:e(i,a+1),l=u(i)?n:e(s,a+1);r.push([t,l])}return r}if(t instanceof Set){let r=[];for(let n of(c.set(t,r),t.values()))r.push(e(n,a+1));return r}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:i};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},963316,e=>{"use strict";var t=e.i(478902),a=e.i(902858),r=e.i(366652),n=e.i(975924),i=e.i(4196),s=e.i(389959),l=e.i(355901),o=e.i(198693),c=e.i(458084),d=e.i(931244),u=e.i(211761),m=e.i(376841),h=e.i(102631),p=e.i(785951),f=e.i(448710),b=e.i(215618),y=e.i(567558),g=e.i(513826),_=e.i(693241),x=e.i(300424),j=e.i(642834),w=e.i(462142),v=e.i(302372),S=e.i(738196),k=e.i(2579),N=e.i(114378),C=e.i(635494),E=e.i(392491),P=e.i(10429),T=e.i(931942),A=e.i(441081),R=e.i(837710),L=e.i(746301),I=e.i(127739),q=e.i(456050),D=e.i(228027);let $=()=>{let[e,p]=(0,i.useQueryState)("schema",i.parseAsString.withDefault("public").withOptions({history:"replace"})),[f,$]=(0,i.useQueryState)("search",i.parseAsString.withDefault("").withOptions({history:"replace",clearOnDefault:!0})),O=(0,s.useDeferredValue)(f),{data:z}=(0,C.useSelectedProjectQuery)(),{data:B}=(0,w.useProjectPostgrestConfigQuery)({projectRef:z?.ref}),F=(0,o.useIsInlineEditorEnabled)(),{openSidebar:M}=(0,A.useSidebarManagerSnapshot)(),{setValue:Q,setTemplates:K,setInitialPrompt:U}=(0,T.useEditorPanelStateSnapshot)(),[H,W]=(0,s.useState)(),[Y,G]=(0,i.useQueryState)("new",i.parseAsBoolean.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{isSchemaLocked:V}=(0,E.useIsProtectedSchema)({schema:e,excludedSchemas:["realtime"]}),{data:X,isPending:Z,isError:J,error:ee}=(0,v.useDatabasePoliciesQuery)({projectRef:z?.ref,connectionString:z?.connectionString}),{setValue:et,value:ea}=(0,N.useQueryStateWithSelect)({urlKey:"edit",select:e=>e?X?.find(t=>t.id.toString()===e):void 0,enabled:!!X,onError:()=>l.toast.error("Policy not found")}),{data:er,isPending:en,isSuccess:ei,isError:es,error:el}=(0,S.useTablesQuery)({projectRef:z?.ref,connectionString:z?.connectionString,schema:e}),{tables:eo,visibleTableIds:ec}=(0,s.useMemo)(()=>((e,t,a)=>{let r=e.slice().sort((e,t)=>e.name.localeCompare(t.name)),n=new Set;if(!a)return r.forEach(e=>n.add(e.id)),{tables:r,visibleTableIds:n};let i=a.toLowerCase(),s=new Set(t.filter(e=>e.name.toLowerCase().includes(i)).map(e=>`${e.schema}.${e.table}`));return r.forEach(e=>{(e.name.toLowerCase().includes(i)||e.id.toString()===i||s.has(`${e.schema}.${e.name}`))&&n.add(e.id)}),{tables:r,visibleTableIds:n}})(er??[],X??[],f),[er,X,f]),ed=(0,s.useMemo)(()=>B?.db_schema?B.db_schema.split(",").map(e=>e.trim()).filter(e=>e.length>0):[],[B?.db_schema]),{can:eu,isSuccess:em}=(0,k.useAsyncCheckPermissions)(a.PermissionAction.TENANT_SQL_ADMIN_READ,"policies"),eh=(0,s.useCallback)(t=>{if(W(t),et(null),G(!0),F){let a=`create policy "replace_with_policy_name"
  on ${e}.${t}
  for select
  to authenticated
  using (
    true  -- Write your policy condition here
);`;U("Create a new RLS policy that..."),Q(a),K([]),M(b.SIDEBAR_KEYS.EDITOR_PANEL)}else G(!0)},[F,M,e]),ep=(0,s.useCallback)(e=>{W(void 0),F?(U(`Update the RLS policy with name "${e.name}" that...`),Q((0,h.generatePolicyUpdateSQL)(e)),K((0,u.getGeneralPolicyTemplates)(e.schema,e.table).map(e=>({name:e.templateName,description:e.description,content:e.statement}))),M(b.SIDEBAR_KEYS.EDITOR_PANEL)):et(e.id.toString())},[F,M]),ef=(0,s.useCallback)(()=>$(""),[$]),eb=!!ea;return em&&!eu?(0,t.jsx)(_.default,{isFullPage:!0,resourceText:"view this project's RLS policies"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.PageHeader,{size:"large",children:(0,t.jsxs)(q.PageHeaderMeta,{children:[(0,t.jsxs)(q.PageHeaderSummary,{children:[(0,t.jsx)(q.PageHeaderTitle,{children:"Policies"}),(0,t.jsx)(q.PageHeaderDescription,{children:"Manage Row Level Security policies for your tables"})]}),(0,t.jsx)(q.PageHeaderAside,{children:(0,t.jsx)(g.DocsButton,{href:`${P.DOCS_URL}/learn/auth-deep-dive/auth-row-level-security`})})]})}),(0,t.jsx)(I.PageContainer,{size:"large",children:(0,t.jsx)(D.PageSection,{children:(0,t.jsxs)(D.PageSectionContent,{children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-row gap-x-2",children:[(0,t.jsx)(x.default,{className:"w-full lg:w-[180px]",size:"tiny",align:"end",showError:!1,selectedSchemaName:e,onSelectSchema:e=>{p(e),$("")}}),(0,t.jsx)(L.Input,{size:"tiny",placeholder:"Filter tables and policies",className:"block w-full lg:w-52",containerClassName:"[&>div>svg]:-mt-0.5",value:f||"",onChange:e=>{$(e.target.value)},icon:(0,t.jsx)(r.Search,{size:14}),actions:f?(0,t.jsx)(R.Button,{size:"tiny",type:"text",className:"p-0 h-5 w-5",icon:(0,t.jsx)(n.X,{}),onClick:()=>$("")}):null})]}),en&&(0,t.jsx)(j.GenericSkeletonLoader,{}),es&&(0,t.jsx)(y.default,{error:el,subject:"Failed to retrieve tables"}),ei&&(0,t.jsx)(d.PoliciesDataProvider,{policies:X??[],isPoliciesLoading:Z,isPoliciesError:J,policiesError:ee??void 0,exposedSchemas:ed,children:(0,t.jsx)(c.Policies,{search:O,schema:e,tables:eo,hasTables:(er??[]).length>0,isLocked:V,visibleTableIds:ec,onSelectCreatePolicy:eh,onSelectEditPolicy:ep,onResetSearch:ef})}),(0,t.jsx)(m.PolicyEditorPanel,{visible:Y||eb,schema:e,searchString:f,selectedTable:eb?void 0:H,selectedPolicy:eb?ea:void 0,onSelectCancel:()=>{W(void 0),eb?et(null):G(!1)},authContext:"database"})]})})})]})};$.getLayout=e=>(0,t.jsx)(f.default,{children:(0,t.jsx)(p.default,{children:e})}),e.s(["default",0,$])},275115,(e,t,a)=>{let r="/project/[ref]/auth/policies";(window.__NEXT_P=window.__NEXT_P||[]).push([r,()=>e.r(963316)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([r])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},587525,e=>{e.v(t=>Promise.all(["static/chunks/da2f61ca91d09b7f.js"].map(t=>e.l(t))).then(()=>t(127351)))},168845,e=>{e.v(t=>Promise.all(["static/chunks/99714db866f77205.js"].map(t=>e.l(t))).then(()=>t(238625)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/df8f2d32c834951d.js","static/chunks/82dddbda1a808189.js","static/chunks/d3a06a9a43f3833e.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/d690909a90d04a2e.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=be5fb218-7593-266c-2319-5e3ef49ba536
//# sourceMappingURL=02e62b803cdd051e.js.map