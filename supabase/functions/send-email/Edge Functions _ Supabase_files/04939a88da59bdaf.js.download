;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4aa3c7a8-b70c-6933-00ef-fd6c99375f5e")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var a=e.i(478902),t=e.i(710483);let s=({resourceText:e,isFullPage:s=!1})=>{let r=()=>(0,a.jsx)(t.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return s?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("div",{className:"max-w-lg",children:(0,a.jsx)(r,{})})}):(0,a.jsx)(r,{})};e.s(["NoPermission",0,s,"default",0,s])},547723,e=>{"use strict";var a=e.i(478902),t=e.i(389959),s=e.i(843778);let r=(0,t.forwardRef)((e,t)=>(0,a.jsx)("nav",{ref:t,dir:"ltr",...e,className:(0,s.cn)("border-b",e.className),children:(0,a.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),i=(0,t.forwardRef)(({children:e,className:t,active:r,...i},n)=>(0,a.jsx)("li",{ref:n,"aria-selected":r?"true":"false","data-state":r?"active":"inactive",className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",t),...i,children:e}));e.s(["NavMenu",0,r,"NavMenuItem",0,i])},862326,e=>{"use strict";var a=e.i(478902),t=e.i(938933),s=e.i(843778);function r({children:e,className:t,tag:s="div",style:r}){let i=`${s}`;return(0,a.jsx)(i,{style:r,children:e})}r.Title=function({className:e,level:t=1,children:s,style:r}){let i=`h${t}`;return(0,a.jsx)(i,{style:r,children:s})},r.Text=function({className:e,children:t,style:s,type:r,disabled:i,mark:n,code:l,keyboard:c,underline:o,strikethrough:d,strong:u,small:p}){return l?(0,a.jsx)("code",{style:s,children:t}):n?(0,a.jsx)("mark",{style:s,children:t}):c?(0,a.jsx)("kbd",{style:s,children:t}):u?(0,a.jsx)("strong",{style:s,children:t}):(0,a.jsx)("span",{style:s,children:t})},r.Link=function({children:e,target:t="_blank",href:s,className:r,onClick:i,style:n}){return(0,a.jsx)("a",{onClick:i,href:s,target:t,rel:"noopener noreferrer",style:n,children:e})};var i=e.i(389959);let n=(0,i.createContext)({type:"text"}),l=e=>{let{type:t}=e;return(0,a.jsx)(n.Provider,{value:{type:t},children:e.children})},c=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function o({children:e,className:t,ulClassName:s,style:r,type:i="text"}){return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:t,style:r,children:(0,a.jsx)(l,{type:i,children:(0,a.jsx)("ul",{className:s,children:e})})})}o.Item=function({children:e,icon:r,active:i,rounded:n,onClick:l,doNotCloseOverlay:o=!1,showActiveBar:d=!1,style:u}){let p=(0,t.default)("menu"),{type:h}=c(),f=[p.item.base];f.push(p.item.variants[h].base),i?f.push(p.item.variants[h].active):f.push(p.item.variants[h].normal);let m=[p.item.content.base];i?m.push(p.item.content.active):m.push(p.item.content.normal);let x=[p.item.icon.base];return i?x.push(p.item.icon.active):x.push(p.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,s.cn)("outline-none",f),style:u,onClick:l,"aria-current":i?"page":void 0,children:[r&&(0,a.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:r}),(0,a.jsx)("span",{className:m.join(" "),children:e})]})},o.Group=function({children:e,icon:s,title:r}){let i=(0,t.default)("menu"),{type:n}=c();return(0,a.jsxs)("div",{className:[i.group.base,i.group.variants[n]].join(" "),children:[s&&(0,a.jsx)("span",{className:i.group.icon,children:s}),(0,a.jsx)("span",{className:i.group.content,children:r}),e]})},o.Misc=function({children:e}){return(0,a.jsx)("div",{children:(0,a.jsx)(r.Text,{children:(0,a.jsx)("span",{children:e})})})},e.s(["Menu",0,o],862326)},388147,799793,e=>{"use strict";var a=e.i(478902),t=e.i(587433),s=e.i(862326),r=e.i(215261),i=e.i(837710);let n=({name:e="",isActive:n,isExternal:l,icon:c,rightIcon:o,url:d="",target:u="_self",onClick:p,textClassName:h="",hoverText:f="",label:m})=>{let x=(0,a.jsx)(s.Menu.Item,{icon:c,rounded:!0,active:n,onClick:p,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:f||("string"==typeof e?e:""),children:[(0,a.jsx)("span",{className:"truncate flex-1 min-w-0",children:e}),void 0!==m&&(0,a.jsx)(t.Badge,{variant:"new"===m.toLowerCase()?"success":"warning",className:"flex-shrink-0",children:m})]}),o&&(0,a.jsx)("div",{children:o})]})});return d?l?(0,a.jsx)(i.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,a.jsx)(r.default,{href:d,target:"_blank",rel:"noreferrer",children:e})}):(0,a.jsx)(r.default,{href:d,className:"block",target:u,children:x}):x};e.s(["default",0,n],799793),e.s(["ProductMenu",0,({page:e,menu:r})=>(0,a.jsx)("div",{className:"flex flex-col space-y-8",children:(0,a.jsx)(s.Menu,{type:"pills",children:r.map((i,l)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.Menu.Group,{title:i.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:i.title}),i.isPreview&&(0,a.jsx)(t.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:i.items.map(t=>{let s=t.pages?t.pages.includes(e??""):e===t.key;return(0,a.jsx)(n,{url:t.url,name:t.name,icon:t.icon,rightIcon:t.rightIcon,isActive:s,isExternal:t.isExternal,target:t.isExternal?"_blank":"_self",label:t.label},t.key)})})]})}),l!==r.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},i.key||i.title))})})],388147)},3259,100387,e=>{"use strict";var a=e.i(478902),t=e.i(153545),s=e.i(933505);e.s(["ChevronRightIcon",()=>s.default],100387);var s=s,r=e.i(389959),i=e.i(843778);let n=r.forwardRef(({...e},t)=>(0,a.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...e}));n.displayName="Breadcrumb";let l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("ol",{ref:s,className:(0,i.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...t}));l.displayName="BreadcrumbList";let c=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("li",{ref:s,className:(0,i.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...t}));c.displayName="BreadcrumbItem";let o=r.forwardRef(({asChild:e,className:s,...r},n)=>{let l=e?t.Slot:"a";return(0,a.jsx)(l,{ref:n,className:(0,i.cn)("transition-colors underline lg:no-underline hover:text-foreground",s),...r})});o.displayName="BreadcrumbLink";let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("no-underline text-foreground",e),...t}));d.displayName="BreadcrumbPage";let u=({children:e,className:t,...r})=>(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:size-3.5 text-foreground-muted",t),...r,children:e??(0,a.jsx)(s.default,{})});u.displayName="BreadcrumbSeparator",e.s(["Breadcrumb",()=>n,"BreadcrumbItem",()=>c,"BreadcrumbLink",()=>o,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},127739,e=>{"use strict";var a=e.i(478902),t=e.i(709520),s=e.i(389959),r=e.i(843778);let i=(0,t.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),n=(0,s.forwardRef)(({className:e,size:t,...s},n)=>(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)(i({size:t}),e)}));n.displayName="PageContainer",e.s(["PageContainer",0,n])},456050,e=>{"use strict";var a=e.i(478902),t=e.i(709520),s=e.i(389959),r=e.i(843778),i=e.i(3259),n=e.i(127739);let l=(0,t.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),c=(0,s.createContext)({size:"default"}),o=()=>(0,s.useContext)(c),d=({className:e,size:t,children:s,...i})=>{let n=t??"default";return(0,a.jsx)(c.Provider,{value:{size:n},children:(0,a.jsx)("div",{"data-slot":"page-header","data-size":n,className:(0,r.cn)(l({size:n}),e),...i,children:s})})},u=({className:e,children:t,...s})=>{let{size:l}=o();return(0,a.jsx)(n.PageContainer,{size:l,children:(0,a.jsx)(i.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,r.cn)("flex items-center gap-4 [&_li]:text-xs",e),...s,children:t})})};u.displayName="PageHeaderBreadcrumb";let p=({className:e,...t})=>(0,a.jsx)("div",{"data-slot":"page-header-icon",className:(0,r.cn)("text-foreground-light",e),...t});p.displayName="PageHeaderIcon";let h=({className:e,children:t,...s})=>(0,a.jsx)("div",{"data-slot":"page-header-summary",className:(0,r.cn)("flex flex-col gap-1",e),...s,children:t});h.displayName="PageHeaderSummary";let f=({className:e,children:t,...s})=>(0,a.jsx)("h1",{"data-slot":"page-header-title",className:(0,r.cn)("heading-title",e),...s,children:t}),m=({className:e,children:t,...s})=>(0,a.jsx)("div",{"data-slot":"page-header-description",className:(0,r.cn)("heading-subSection text-foreground-light",e),...s,children:t}),x=({className:e,children:t,...s})=>{let{size:i}=o();return(0,a.jsx)(n.PageContainer,{size:i,children:(0,a.jsx)("div",{"data-slot":"page-header-meta",className:(0,r.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...s,children:t})})};x.displayName="PageHeaderMeta";let b=({className:e,...t})=>(0,a.jsx)("div",{"data-slot":"page-header-actions",className:(0,r.cn)("flex items-center gap-2 shrink-0",e),...t});b.displayName="PageHeaderAside";let j=({className:e,...t})=>{let{size:s}=o();return(0,a.jsx)(n.PageContainer,{size:s,className:(0,r.cn)("full"===s&&"border-b"),children:(0,a.jsx)("div",{"data-slot":"page-header-footer",className:(0,r.cn)("w-full [&>nav]:border-b-0","full"!==s&&"border-b",e),...t})})};j.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>b,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>m,"PageHeaderIcon",()=>p,"PageHeaderMeta",()=>x,"PageHeaderNavigationTabs",()=>j,"PageHeaderSummary",()=>h,"PageHeaderTitle",()=>f])},450972,e=>{"use strict";var a=e.i(248593),t=e.i(242882),s=e.i(234745),r=e.i(635494);e.i(10429);var i=e.i(837508),n=e.i(667286);async function l({projectRef:e,connectionString:t},r,i){if(!e)throw Error("projectRef is required");let n=new Headers(i);t&&n.set("x-connection-encrypted",t);let{data:l,error:c}=await (0,s.get)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":t,"x-pg-application-name":a.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e}},headers:n,signal:r});return c&&(0,s.handleError)(c),l}e.s(["useDatabaseExtensionsQuery",0,({projectRef:e,connectionString:a},{enabled:s=!0,...c}={})=>{let{data:o}=(0,r.useSelectedProjectQuery)(),d=o?.status===i.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,t.useQuery)({queryKey:n.databaseExtensionsKeys.list(e),queryFn:({signal:t})=>l({projectRef:e,connectionString:a},t),enabled:s&&void 0!==e&&d,...c})}])},737051,e=>{"use strict";e.i(128328);var a=e.i(657588),t=e.i(265735);e.s(["useIsETLPrivateAlpha",0,()=>{let{data:e}=(0,t.useSelectedOrganizationQuery)(),s=(0,a.useFlag)("etlPrivateAlpha"),r="string"==typeof s?s.split(",").map(e=>e.trim()):[];return(0,a.useFlag)("etlPrivateAlphaOverride")||r.includes(e?.slug??"")}])},812136,e=>{"use strict";var a=e.i(478902),t=e.i(898452),s=e.i(463333),r=e.i(737051),i=e.i(388147),n=e.i(450972),l=e.i(144676),c=e.i(912793),o=e.i(635494),d=e.i(951138),u=e.i(825713),p=e.i(731201);let h=()=>{let{data:e}=(0,o.useSelectedProjectQuery)(),d=(0,t.useRouter)().pathname.split("/")[4],{data:u}=(0,n.useDatabaseExtensionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{data:h}=(0,l.useProjectAddonsQuery)({projectRef:e?.ref}),f=void 0!==(u??[]).find(e=>"pg_net"===e.name),m=h?.selected_addons.find(e=>"pitr"===e.type)!==void 0,x=(0,s.useIsColumnLevelPrivilegesEnabled)(),b=(0,r.useIsETLPrivateAlpha)(),{databaseReplication:j,databaseRoles:g,integrationsWrappers:y}=(0,c.useIsFeatureEnabled)(["database:replication","database:roles","integrations:wrappers"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.ProductMenu,{page:d,menu:(0,p.generateDatabaseMenu)(e,{pgNetExtensionExists:f,pitrEnabled:m,columnLevelPrivileges:x,showPgReplicate:j,enablePgReplicate:b,showRoles:g,showWrappers:y})})})},f=(0,d.withAuth)(({children:e})=>(0,a.jsx)(u.ProjectLayout,{product:"Database",productMenu:(0,a.jsx)(h,{}),isBlocking:!1,children:e}));e.s(["default",0,f])},102703,e=>{"use strict";var a=e.i(478902),t=e.i(17203),s=e.i(180148),r=e.i(699879),i=e.i(215261),n=e.i(389959),l=e.i(837710);let c=(0,n.forwardRef)(({icon:e,title:c,description:o,url:d,urlLabel:u="Read more",defaultVisibility:p=!1,hideCollapse:h=!1,button:f,className:m="",block:x=!1},b)=>{let[j,g]=(0,n.useState)(p);return(0,a.jsx)("div",{ref:b,role:"alert",className:`${x?"block w-full":""}
      block w-full rounded-md border bg-surface-300/25 py-3 ${m}`,children:(0,a.jsxs)("div",{className:"flex flex-col px-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[e&&(0,a.jsx)("span",{className:"text-foreground-lighter",children:e}),(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("h5",{className:"text-foreground",children:c})})]}),o&&!h?(0,a.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>g(!j),children:j?(0,a.jsx)(r.Minimize2,{size:14,strokeWidth:1.5}):(0,a.jsx)(s.Maximize2,{size:14,strokeWidth:1.5})}):null]}),(o||d||f)&&(0,a.jsxs)("div",{className:`flex flex-col space-y-3 overflow-hidden transition-all ${j?"mt-3":""}`,style:{maxHeight:500*!!j},children:[(0,a.jsx)("div",{className:"text-foreground-light text-sm",children:o}),d&&(0,a.jsx)("div",{children:(0,a.jsx)(l.Button,{asChild:!0,type:"default",icon:(0,a.jsx)(t.ExternalLink,{}),children:(0,a.jsx)(i.default,{href:d,target:"_blank",rel:"noreferrer",children:u})})}),f&&(0,a.jsx)("div",{children:f})]})]})})});c.displayName="InformationBox",e.s(["default",0,c])},394983,228282,e=>{"use strict";var a=e.i(478902);let t=(0,e.i(388019).default)("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);e.s(["SquarePlus",()=>t],228282);var s=e.i(389959),r=e.i(843778);e.s(["EmptyStatePresentational",0,({icon:e,title:i,description:n,children:l,className:c,iconSize:o=24,iconClassName:d,contentClassName:u})=>{let p=e||t,h=(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center text-center text-balance",u),children:[(0,a.jsx)("h3",{children:i}),n&&(0,a.jsx)("p",{className:"text-foreground-light text-sm max-w-[640px]",children:n})]});return(0,a.jsxs)("aside",{className:(0,r.cn)("border border-dashed w-full bg-surface-100 rounded-lg px-4 py-10 flex flex-col items-center gap-y-3",c),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-3 items-center",children:[(0,s.isValidElement)(p)?p:"function"==typeof p||"object"==typeof p&&null!==p&&"$$typeof"in p?(0,s.createElement)(p,{size:o,strokeWidth:1.5,className:(0,r.cn)("text-foreground-muted",d)}):p,h]}),l]})}],394983)},42081,e=>{"use strict";let a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>a])},672296,e=>{"use strict";function a(e){return e.split("#")[0]}function t(e,a={}){let{maxDepth:s=3,redaction:r="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=a,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),c=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],o=new WeakMap;function d(e){let a=e;for(let{re:e}of c)a=a.replace(e,r);return a}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(a,t){if(null==a||"number"==typeof a||"boolean"==typeof a||"bigint"==typeof a)return a;if("string"==typeof a)return d(a);if("function"==typeof a)return"[Function]";if(a instanceof Date)return a.toISOString();if(a instanceof RegExp)return a.toString();if(ArrayBuffer.isView(a)&&!(a instanceof DataView))return`[TypedArray byteLength=${a.byteLength}]`;if(a instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${a.byteLength}]`;if(t>=s)return i;if("object"==typeof a){if(o.has(a))return"[Circular]";if(Array.isArray(a)){let s=[];o.set(a,s);for(let r=0;r<a.length;r++)s[r]=e(a[r],t+1);return s}if(function(e){if(null===e||"object"!=typeof e)return!1;let a=Object.getPrototypeOf(e);return a===Object.prototype||null===a}(a)){let s={};for(let[i,n]of(o.set(a,s),Object.entries(a)))u(i)?s[i]=r:s[i]=e(n,t+1);return s}if(a instanceof Map){let s=[];for(let[i,n]of(o.set(a,s),a.entries())){let a=u(i)?r:e(i,t+1),l=u(i)?r:e(n,t+1);s.push([a,l])}return s}if(a instanceof Set){let s=[];for(let r of(o.set(a,s),a.values()))s.push(e(r,t+1));return s}if(a instanceof URL)return a.toString();if(a instanceof Error){let e={name:a.name,message:d(a.message),stack:i};return o.set(a,e),e}try{return d(String(a))}catch{return d(Object.prototype.toString.call(a))}}return d(String(a))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>t,"sanitizeUrlHashParams",()=>a])},602591,e=>{"use strict";var a=e.i(478902),t=e.i(471880),s=e.i(394983);e.s(["BackupsEmpty",0,()=>(0,a.jsx)(s.EmptyStatePresentational,{icon:t.DatabaseBackup,title:"No backups yet",description:"Check again tomorrow."})])},254297,e=>{"use strict";var a=e.i(478902),t=e.i(215261),s=e.i(912793),r=e.i(635494),i=e.i(587433),n=e.i(547723);e.s(["default",0,function({active:e}){let{ref:l,cloud_provider:c}=(0,r.useSelectedProjectQuery)()?.data||{},{databaseRestoreToNewProject:o}=(0,s.useIsFeatureEnabled)(["database:restore_to_new_project"]),d=[{enabled:!0,id:"scheduled",label:"Scheduled backups",href:`/project/${l}/database/backups/scheduled`},{enabled:!0,id:"pitr",label:"Point in time",href:`/project/${l}/database/backups/pitr`},{enabled:o&&"FLY"!==c,id:"rtnp",label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["Restore to new project ",(0,a.jsx)(i.Badge,{variant:"warning",children:"Beta"})]}),href:`/project/${l}/database/backups/restore-to-new-project`}];return(0,a.jsx)(n.NavMenu,{className:"overflow-hidden overflow-x-auto",children:d.map(s=>s.enabled&&(0,a.jsx)(n.NavMenuItem,{active:s.id===e,children:(0,a.jsx)(t.default,{href:s.href,children:s.label})},s.id))})}])},471880,e=>{"use strict";let a=(0,e.i(388019).default)("DatabaseBackup",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 12a9 3 0 0 0 5 2.69",key:"1ui2ym"}],["path",{d:"M21 9.3V5",key:"6k6cib"}],["path",{d:"M3 5v14a9 3 0 0 0 6.47 2.88",key:"i62tjy"}],["path",{d:"M12 12v4h4",key:"1bxaet"}],["path",{d:"M13 20a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L12 16",key:"1f4ei9"}]]);e.s(["DatabaseBackup",()=>a],471880)},685509,e=>{"use strict";var a=e.i(242882),t=e.i(234745),s=e.i(635494),r=e.i(246230);async function i({projectRef:e},a){if(!e)throw Error("Project ref is required");let{data:s,error:r}=await (0,t.get)("/platform/database/{ref}/backups",{params:{path:{ref:e}},signal:a});return r&&(0,t.handleError)(r),s}e.s(["useBackupsQuery",0,({projectRef:e},{enabled:t=!0,...n}={})=>{let l=(0,s.useIsOrioleDbInAws)();return(0,a.useQuery)({queryKey:r.databaseKeys.backups(e),queryFn:({signal:a})=>i({projectRef:e},a),enabled:t&&!l&&void 0!==e,...n})}])},846656,e=>{"use strict";var a=e.i(478902),t=e.i(206413),s=e.i(178527),r=e.i(877555);e.s(["BackupsStorageAlert",0,()=>(0,a.jsxs)(s.Alert_Shadcn_,{variant:"default",children:[(0,a.jsx)(r.WarningIcon,{}),(0,a.jsx)(t.AlertDescription_Shadcn_,{children:"Database backups do not include objects stored via the Storage API, as the database only includes metadata about these objects. Restoring an old backup does not restore objects that have been deleted since then."})]})])},522356,e=>{"use strict";var a=e.i(478902),t=e.i(902858),s=e.i(833655);e.i(128328);var r=e.i(158639),i=e.i(55956),n=e.i(613851),l=e.i(898452),c=e.i(389959),o=e.i(355901),d=e.i(368315),u=e.i(235458),p=e.i(38429),h=e.i(234745);async function f({ref:e,backup:a}){if(a.isPhysicalBackup){let{data:t,error:s}=await (0,h.post)("/platform/database/{ref}/backups/restore-physical",{params:{path:{ref:e}},body:{id:a.id,recovery_time_target:a.inserted_at}});if(s)throw s;return t}let{data:t,error:s}=await (0,h.post)("/platform/database/{ref}/backups/restore",{params:{path:{ref:e}},body:{id:a.id}});return s&&(0,h.handleError)(s),t}var m=e.i(685509),x=e.i(164045),b=e.i(635494),j=e.i(10429),g=e.i(837508),y=e.i(466472),v=e.i(786741),k=e.i(215312),P=e.i(937942),w=e.i(698024),N=e.i(2579),_=e.i(587433),S=e.i(613580),A=e.i(955909);let B=({index:e,isHealthy:s,backup:i,onSelectBackup:n})=>{let{ref:l}=(0,r.useParams)(),{can:c}=(0,N.useAsyncCheckPermissions)(t.PermissionAction.INFRA_EXECUTE,"queue_job.restore.prepare"),{mutate:o,isPending:d}=(0,w.useBackupDownloadMutation)({onSuccess:e=>{let{fileUrl:a}=e,t=document.createElement("a");t.href=a,document.body.appendChild(t),t.click(),document.body.removeChild(t)}});return(0,a.jsxs)("div",{className:`flex h-12 items-center justify-between px-6 ${e?"border-t border-default":""}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(A.TimestampInfo,{displayAs:"utc",utcTimestamp:i.inserted_at,labelFormat:"DD MMM YYYY HH:mm:ss (ZZ)",className:"text-left !text-sm font-mono tracking-tight"}),(0,a.jsxs)(S.Tooltip,{children:[(0,a.jsx)(S.TooltipTrigger,{children:(0,a.jsx)(_.Badge,{variant:"default",children:i.isPhysicalBackup?"Physical":"Logical"})}),(0,a.jsxs)(S.TooltipContent,{side:"bottom",children:["Learn more about backup types"," ",(0,a.jsx)(P.InlineLink,{href:"https://supabase.com/blog/postgresql-physical-logical-backups",children:"here"})]})]})]}),(0,a.jsx)("div",{children:"COMPLETED"===i.status?(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(k.ButtonTooltip,{type:"default",disabled:!s||!c,onClick:n,tooltip:{content:{side:"bottom",text:s?c?void 0:"You need additional permissions to trigger a restore":"Cannot be restored as project is not active"}},children:"Restore"}),(0,a.jsx)(k.ButtonTooltip,{type:"default",icon:(0,a.jsx)(v.Download,{}),loading:d,disabled:!c||d||i.isPhysicalBackup,onClick:()=>{if(!l)return console.error("Project ref is required");o({ref:l,backup:i})},tooltip:{content:{side:"bottom",className:i.isPhysicalBackup?"w-64":"",text:i.isPhysicalBackup?(0,a.jsxs)(a.Fragment,{children:["Physical backups cannot be downloaded through the dashboard. You can still download it via pgdump by following our guide"," ",(0,a.jsx)(P.InlineLink,{href:`${j.DOCS_URL}/guides/troubleshooting/download-logical-backups`,children:"here"}),"."]}):c?void 0:"You need additional permissions to download backups"}},children:"Download"})]}):(0,a.jsx)(_.Badge,{variant:"warning",children:"Backup In Progress..."})})]})};var E=e.i(602591),T=e.i(846656);let C=()=>{let e=(0,l.useRouter)(),{ref:t}=(0,r.useParams)(),[s,h]=(0,c.useState)(),{setProjectStatus:j}=(0,x.useSetProjectStatus)(),{data:v}=(0,b.useSelectedProjectQuery)(),k=v?.status===g.PROJECT_STATUS.ACTIVE_HEALTHY,{data:P}=(0,m.useBackupsQuery)({projectRef:t}),{mutate:w,isPending:N,isSuccess:_}=(({onSuccess:e,onError:a,...t}={})=>(0,p.useMutation)({mutationFn:e=>f(e),async onSuccess(a,t,s){await e?.(a,t,s)},async onError(e,t,s){void 0===a?o.toast.error(`Failed to restore from backup: ${e.message}`):a(e,t,s)},...t}))({onSuccess:()=>{t&&setTimeout(()=>{j({ref:t,status:g.PROJECT_STATUS.RESTORING}),o.toast.success(`Restoring database back to ${(0,i.default)(s?.inserted_at).format("DD MMM YYYY HH:mm:ss")}`),e.push(`/project/${t}`)},3e3)}}),S=P?.tierKey??"",A=(P?.backups??[]).sort((e,a)=>new Date(a.inserted_at).valueOf()-new Date(e.inserted_at).valueOf()),C=P?.pitr_enabled;return"FREE"===S?(0,a.jsx)(u.UpgradeToPro,{addon:"pitr",source:"backups",featureProposition:"have up to 7 days of scheduled backups",icon:(0,a.jsx)(n.Clock,{size:20,strokeWidth:1.5}),primaryText:"Free Plan does not include project backups.",secondaryText:"Upgrade to the Pro Plan for up to 7 days of scheduled backups."}):C?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"space-y-6",children:0===A.length&&"FREE"!==S?(0,a.jsx)(E.BackupsEmpty,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.BackupsStorageAlert,{}),(0,a.jsx)(d.default,{children:A?.map((e,t)=>(0,a.jsx)(B,{backup:e,index:t,isHealthy:k,onSelectBackup:()=>h(e)},e.id))})]})}),(0,a.jsx)(y.default,{size:"medium",confirmLabel:"Confirm restore",confirmLabelLoading:"Restoring",visible:void 0!==s,title:"Confirm to restore from backup",alert:{base:{variant:"warning"},title:"Your project will be offline while the restore is in progress",description:"It is advised to upgrade at a time when there will be minimal impact for your application."},loading:N||_,onCancel:()=>h(void 0),onConfirm:()=>void 0===t?console.error("Project ref required"):void 0===s?console.error("Backup required"):void w({ref:t,backup:s}),children:(0,a.jsxs)("p",{className:"text-sm",children:["Are you sure you want to restore from"," ",(0,i.default)(s?.inserted_at).format("DD MMM YYYY"),"? This will destroy any new data written since this backup was made."]})})]})};var R=e.i(254297),D=e.i(812136),I=e.i(448710),M=e.i(567558),L=e.i(513826),z=e.i(102703),H=e.i(693241),O=e.i(642834),F=e.i(710483),Y=e.i(127739),$=e.i(456050),U=e.i(228027);let q=()=>{let{ref:e}=(0,r.useParams)(),{data:i,error:n,isPending:l,isError:c,isSuccess:o}=(0,m.useBackupsQuery)({projectRef:e}),d=(0,b.useIsOrioleDbInAws)(),u=i?.pitr_enabled,{can:p,isSuccess:h}=(0,N.useAsyncCheckPermissions)(t.PermissionAction.READ,"back_ups");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)($.PageHeader,{children:[(0,a.jsx)($.PageHeaderMeta,{children:(0,a.jsx)($.PageHeaderSummary,{children:(0,a.jsx)($.PageHeaderTitle,{children:"Database Backups"})})}),(0,a.jsx)($.PageHeaderNavigationTabs,{children:(0,a.jsx)(R.default,{active:"scheduled"})})]}),(0,a.jsx)(Y.PageContainer,{children:(0,a.jsx)(U.PageSection,{children:(0,a.jsx)(U.PageSectionContent,{children:d?(0,a.jsx)(F.Admonition,{type:"default",title:"Database backups are not available for OrioleDB",description:"OrioleDB is currently in public alpha and projects created are strictly ephemeral with no database backups",children:(0,a.jsx)(L.DocsButton,{abbrev:!1,className:"mt-2",href:`${j.DOCS_URL}`})}):(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[l&&(0,a.jsx)(O.GenericSkeletonLoader,{}),c&&(0,a.jsx)(M.default,{error:n,subject:"Failed to retrieve scheduled backups"}),o&&(0,a.jsxs)(a.Fragment,{children:[!u&&(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Projects are backed up daily around midnight of your project's region and can be restored at any time."}),u&&(0,a.jsx)(z.default,{hideCollapse:!0,defaultVisibility:!0,icon:(0,a.jsx)(s.Info,{strokeWidth:2}),title:"Point-In-Time-Recovery (PITR) enabled",description:(0,a.jsxs)("div",{children:["Your project uses PITR and full daily backups are no longer taken. They're not needed, as PITR supports a superset of functionality, in terms of the granular recovery that can be performed."," ",(0,a.jsx)("a",{className:"text-brand transition-colors hover:text-brand-600",href:`${j.DOCS_URL}/guides/platform/backups`,children:"Learn more"})]})}),h&&!p?(0,a.jsx)(H.default,{resourceText:"view scheduled backups"}):(0,a.jsx)(C,{})]})]})})})})]})};q.getLayout=e=>(0,a.jsx)(I.default,{children:(0,a.jsx)(D.default,{title:"Database",children:e})}),e.s(["default",0,q],522356)},260217,(e,a,t)=>{let s="/project/[ref]/database/backups/scheduled";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(522356)]),a.hot&&a.hot.dispose(function(){window.__NEXT_P.push([s])})},111410,e=>{e.v(a=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(a=>e.l(a))).then(()=>a(677146)))},883471,e=>{e.v(a=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(a=>e.l(a))).then(()=>a(518769)))},587525,e=>{e.v(a=>Promise.all(["static/chunks/da2f61ca91d09b7f.js"].map(a=>e.l(a))).then(()=>a(127351)))},168845,e=>{e.v(a=>Promise.all(["static/chunks/99714db866f77205.js"].map(a=>e.l(a))).then(()=>a(238625)))},591393,e=>{e.v(a=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(a=>e.l(a))).then(()=>a(217383)))},379416,e=>{e.v(a=>Promise.all(["static/chunks/d690909a90d04a2e.js"].map(a=>e.l(a))).then(()=>a(931066)))},15732,e=>{e.v(a=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(a=>e.l(a))).then(()=>a(760545)))},957083,e=>{e.v(a=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(a=>e.l(a))).then(()=>a(667558)))},207969,e=>{e.v(a=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(a=>e.l(a))).then(()=>a(427328)))},992842,e=>{e.v(a=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(a=>e.l(a))).then(()=>a(793794)))},239573,e=>{e.v(a=>Promise.all(["static/chunks/edc5d84148401903.js"].map(a=>e.l(a))).then(()=>a(210246)))},963685,e=>{e.v(a=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(a=>e.l(a))).then(()=>a(983756)))},665811,e=>{e.v(a=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(a=>e.l(a))).then(()=>a(544836)))},369256,e=>{e.v(a=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(a=>e.l(a))).then(()=>a(930239)))},16037,e=>{e.v(a=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(a=>e.l(a))).then(()=>a(397698)))},616788,e=>{e.v(a=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(a=>e.l(a))).then(()=>a(7346)))},315750,e=>{e.v(a=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(a=>e.l(a))).then(()=>a(531289)))},460510,e=>{e.v(a=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(a=>e.l(a))).then(()=>a(276898)))},550265,e=>{e.v(a=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(a=>e.l(a))).then(()=>a(259714)))},830960,e=>{e.v(a=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(a=>e.l(a))).then(()=>a(882885)))},336744,e=>{e.v(a=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(a=>e.l(a))).then(()=>a(955268)))},63631,e=>{e.v(a=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(a=>e.l(a))).then(()=>a(853630)))},912072,e=>{e.v(a=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(a=>e.l(a))).then(()=>a(311301)))},730314,e=>{e.v(a=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/df8f2d32c834951d.js","static/chunks/82dddbda1a808189.js","static/chunks/d3a06a9a43f3833e.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(a=>e.l(a))).then(()=>a(686651)))}]);

//# debugId=4aa3c7a8-b70c-6933-00ef-fd6c99375f5e
//# sourceMappingURL=fc7c566b3f10d839.js.map